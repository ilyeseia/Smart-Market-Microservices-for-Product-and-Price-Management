#!/bin/bash

# ุณูุฑูุจุช ูุฅููุงู ุฌููุน ุงูุฎุฏูุงุช

echo "๐ ุฅููุงู ุฌููุน ุงูุฎุฏูุงุช..."

# ุฅููุงู ุงูุญุงููุงุช
docker-compose down

# ุฅุฒุงูุฉ ุงูุดุจูุฉ (ุงุฎุชูุงุฑู)
read -p "ูู ุชุฑูุฏ ุฅุฒุงูุฉ ุงูุดุจูุฉุ (y/N): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    docker network rm microservices-network 2>/dev/null || true
    echo "๐๏ธ  ุชู ุฅุฒุงูุฉ ุงูุดุจูุฉ"
fi

# ุฅุฒุงูุฉ ุงูุญุงููุงุช ูุงูุตูุฑ (ุงุฎุชูุงุฑู)
read -p "ูู ุชุฑูุฏ ุฅุฒุงูุฉ ุงูุญุงููุงุช ูุงูุตูุฑุ (y/N): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    docker-compose down --rmi all --volumes --remove-orphans
    echo "๐๏ธ  ุชู ุฅุฒุงูุฉ ุงูุญุงููุงุช ูุงูุตูุฑ"
fi

echo "โ ุชู ุฅููุงู ุฌููุน ุงูุฎุฏูุงุช ุจูุฌุงุญ!"
